<div class="content-wrapper">
	<!-- Content Header (Page header) -->
	<section class="content-header">
	  <h1 *ngIf="!accion_actualizar">
		 Crear Solicitud de Envío
	  </h1>
	  <h1 *ngIf="!accion_actualizar">
		  添加快递
	  </h1>
	  
	  <h1 *ngIf="accion_actualizar">
		 Actualizar Solicitud de Envío / 更新请求 {{numtra}}
		<!-- <small>Actualizacion de los pedidos</small> -->
	  </h1>
	  <ol *ngIf="!accion_actualizar" class="breadcrumb">
		<li><i class="fa fa-dashboard"></i>Envíos</li>
		<li class="active">Crear Envío</li>
	  </ol>
	  <ol *ngIf="accion_actualizar" class="breadcrumb">
		<li><i class="fa fa-dashboard"></i>Envíos</li>
		<li class="active">Actualizar Envío</li>
	  </ol>
	</section>
  
	<!-- Main content -->
	  <section class="content">
		<div class="row">
			<div class="col-md-6">
				<div class="box box-primary">
					<div class="box-header with-border">
						<h3  style="color:red;font-weight:bold" class="box-title">
							Remitente 寄件人
						</h3>
					</div>
					<div class="box-body">
						<div class="col-lg-12">
							<div class="row">
								<div class="col-md-12">
									<div class="form-group">
										<label for="category">SELECC COURIER <span style="color:red;font-weight:bold">请选择快递公司</span> </label>                              
<!-- 										<select name="emboext_ls" [(ngModel)]="embobinado_ext_seleccionado" class="form-control select2 tip" style="width:100%;">
											<option [ngValue]="undefined" disabled  selected>Seleccione</option>
											<option *ngFor="let e of emboext_lista; let i = index;" [value]="e.emboext_ls">{{e.nom_doc}}</option>
										</select> -->
										
										<div class="custom-select">
										<div class="selected-option" (click)="toggleDropdown()">
											<img [src]="selectedCourier.image" [alt]="selectedCourier.name">
										</div>

										<div class="options" *ngIf="dropdownOpen">
											<div class="option" *ngFor="let courier of couriers" (click)="selectCourier(courier)">
											<img [src]="courier.image" [alt]="courier.name">
											<span>{{ courier.name }}</span>
											</div>
										</div>
										</div>

										<label>NOMBRE <span style="color:red;font-weight:bold">姓名</span></label>  
										<input type="text" [(ngModel)]="nombre_rem" name="nombre" id="nombre" class="form-control ui-autocomplete-input" placeholder="Nombre" disabled autocomplete="on">
										<label>CEDULA O RUC <span style="color:red;font-weight:bold">身份证或税号</span></label>  
										<input type="text" [(ngModel)]="rucced_rem"name="ci_ruc" id="ci_ruc" class="form-control ui-autocomplete-input" placeholder="Cédula o Ruc" disabled autocomplete="on">
										<label>CIUDAD <span style="color:red;font-weight:bold">城市</span></label>  
										<input type="text" [(ngModel)]="ciudad_rem"  name="ciudad" id="ciudad" class="form-control ui-autocomplete-input" placeholder="Ciudad" disabled autocomplete="on">
										<label>TELEFONO <span style="color:red;font-weight:bold">电话</span></label>  
										<input type="text"[(ngModel)]="tlf_rem" name="tlf" id="tlf" class="form-control ui-autocomplete-input" placeholder="Teléfono" disabled autocomplete="on">
										<label>DIRECCION <span style="color:red;font-weight:bold">地址</span></label>  
										<textarea [(ngModel)]="dir_rem" name="dir_rem"  rows="3" cols="2" placeholder="Dirección remitente"  value="" disabled class="pa form-control kb-text"></textarea>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div class="box box-primary">
					<div class="box-header with-border">
						<h3 style="color:blue;font-weight:bold" class="box-title">
							Destinatario 收件人
						</h3>
					</div>
					<div class="box-body">
						<div class="col-lg-12">
							<div class="row">
								<div class="col-md-12">
									<div class="form-group">

<!-- 											<br>
											<br>
											<br>
											<br>
											<br>
											<br> -->
										<div class="warning-message">
										<span class="warning-icon">⚠️</span>
										<span class="warning-text">
											Por favor, complete la dirección detallada del destinatario (ciudad, calle, sector o barrio, número de casa, punto de referencia) / 请填写详细的收件地址（城市、街道、门牌号、参考点）。
										</span>
	
										</div>
										<label>NOMBRE Y APELLIDO<span style="color:red;font-weight:bold">姓名</span></label>  
										<input type="text" [(ngModel)]="nombre_dest" name="nombre" id="nombre" class="form-control ui-autocomplete-input" placeholder="Nombre y apellido" autocomplete="on">
										<label>CEDULA O RUC <span style="color:red;font-weight:bold">身份证或税号</span></label>  
										<input type="text" [(ngModel)]="rucced_dest"name="ci_ruc" id="ci_ruc" class="form-control ui-autocomplete-input" placeholder="Cédula o Ruc" autocomplete="on">
										<label>CIUDAD <span style="color:red;font-weight:bold">城市</span></label>
										<select *ngIf="cod_courier=='LAAR'" name="ciudad_dest" [(ngModel)]="ciudad_dest" class="form-control select2 tip" style="width:100%;">
											<option [ngValue]="undefined" disabled  selected>Seleccione</option>
											<option  *ngFor="let cd of lista_ciudad_dest" [value]="cd.codigo">{{cd.nombre}}({{cd.provincia}})</option> 
										</select>
										<select *ngIf="cod_courier=='SERV'" name="ciudad_dest" [(ngModel)]="ciudad_dest" class="form-control select2 tip" style="width:100%;">
											<option [ngValue]="undefined" disabled  selected>Seleccione</option>
											<option  *ngFor="let cd of lista_ciudad_dest" [value]="cd.id">{{cd.nombre}}</option> 
										</select> 

<!-- 										<input type="text" [(ngModel)]="ciudad_dest"  name="ciudad" id="ciudad" class="form-control ui-autocomplete-input" placeholder="Ciudad" autocomplete="on"> -->
										<div class="row">
											<div class="col-md-4">
											<label>TELEFONO 1 <span style="color:red;font-weight:bold">电话</span></label>  
											<input type="text" [(ngModel)]="tlf_dest" name="tlf" id="tlf" class="form-control ui-autocomplete-input" placeholder="Teléfono" autocomplete="on">

											</div>
											<div class="col-md-4">
											<label>TELEFONO 2 <span style="color:red;font-weight:bold">电话</span></label>  
											<input type="text" [(ngModel)]="tlf_dest2" name="tlf" id="tlf" class="form-control ui-autocomplete-input" placeholder="Teléfono2" autocomplete="on">

											</div>
										</div>

										
										<label>DIRECCION <span style="color:red;font-weight:bold">地址</span></label>  
										<textarea name="dir_dest" [(ngModel)]="dir_dest" rows="3" cols="2" 
										placeholder="Dirección detallada del destinatario (ciudad, calle, sector o barrio, número de casa, punto de referencia) / 收件人详细地址（城市、街道、门牌号、参考点。"  
										value="" class="pa form-control kb-text" autocomplete="on"></textarea>
									</div>
								</div>

							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="box box-primary">
			<div class="box-header with-border">
				<h3 style="color:red;font-weight:bold" class="box-title">
					Información del paquete 包裹信息
				</h3>
			</div>
			<div class="box-body">
				<form (ngSubmit)="guardar_paquete()">
				<div class="col-lg-12">
					<div class="row">
							<div class="col-md-3">
								<label >TIPO DE PRODUCTO:<span style="color:red;font-weight:bold">【产品类型】</span></label><br>
								<label >PAQUETE<span style="color:red;font-weight:bold">包裹</span></label>
								<input type="radio" name="tipo_producto" id="tipo_producto"   [(ngModel)]="agregarPaquete.tipo_producto" [ngStyle]="{'margin-left': '10px', 'margin-right': '15px'}" value="PAQ">
								<label >SOBRE<span style="color:red;font-weight:bold">信封</span></label>
								<input type="radio" name="tipo_producto" id="tipo_producto"   [(ngModel)]="agregarPaquete.tipo_producto" [ngStyle]="{'margin-left': '10px'}" value="SOB">
							</div>
							<div *ngIf="agregarPaquete.tipo_producto=='PAQ'" class="col-md-2">
				
								<label >PESO KG:<span style="color:red;font-weight:bold">重量</span></label>
								<input type="number" name="peso" id="peso"   [(ngModel)]="agregarPaquete.peso"  class="form-control ui-autocomplete-input" placeholder="Kg" autocomplete="on" [min]="1">
							</div>
							<div  *ngIf="agregarPaquete.tipo_producto=='PAQ'" class="col-md-2">
								<label >NUM PIEZAS:<span style="color:red;font-weight:bold">寄送件数</span></label>
 								<select    name="num_piezas" [(ngModel)]="num_piezas" class="form-control select2 tip" style="width:100%;">
											<option [ngValue]="undefined" disabled  selected>Seleccione</option>
											<option  *ngFor="let num of lista_num_piezas" [value]="num.value">{{num.label}}</option>
								</select> 
							</div>
							<div *ngIf="agregarPaquete.tipo_producto=='PAQ'" class="col-md-2">
				
								<label >SEGURO:<span style="color:red;font-weight:bold"> 运输保险</span></label><br>
								<label >SI</label>
								<input type="radio" name="seguro_si" id="seguro_si"   [(ngModel)]="agregarPaquete.seguro" [ngStyle]="{'margin-left': '10px', 'margin-right': '15px'}" value="SI" autocomplete="on">
								<label >NO</label>
								<input type="radio" name="seguro_no" id="seguro_no"   [(ngModel)]="agregarPaquete.seguro" [ngStyle]="{'margin-left': '10px'}" value="NO" autocomplete="on">
							</div>
							<div *ngIf="agregarPaquete.tipo_producto=='PAQ' && agregarPaquete.seguro=='SI'"  class="col-md-3">
								<label >VALOR DECLARADO:<span style="color:red;font-weight:bold">声明价值</span></label>
								<input type="number" name="valor_declarado" id="valor_declarado"   [(ngModel)]="agregarPaquete.valor_declarado"  class="form-control ui-autocomplete-input" placeholder="usd" autocomplete="on" [min]="1">
							</div>
					</div>
					<div class="row">
						<div class="col-md-5">
								<label >CONTENIDO:<span style="color:red;font-weight:bold">包裹内容</span></label>
								<input type="text" name="contenido" id="contenido"   [(ngModel)]="agregarPaquete.contenido"  class="form-control ui-autocomplete-input" placeholder="Contenido" autocomplete="on">
						</div>
						<br>
					</div>
					<div class="row">
						<div class="col-md-3">
							 <input type="submit"  name="agregar_paquete" value="Agregar paquete ( 添加包 )" class="btn btn-success">
						</div>
					</div>
					</div>
				</form>
			</div>
	</div>

	
	  <!-- Your Page Content Here -->
		  <div class="row">
			  <div class="col-xs-12">
				  <form class="validation fv-form fv-form-bootstrap" enctype="multipart/form-data" method="post" accept-charset="utf-8" novalidate="novalidate">
					  <div class="box box-primary">
						  <div class="box-header">
							<h3 style="color:red;font-weight:bold" class="box-title">
								Detalle a facturar ( 发票明细 )
							</h3>
						  </div>
						  


				<div class="box-body">
                    <div class="col-lg-12">
						
                        <div class="row">
                            <div class="col-md-12">
                                <div class="table-responsive">
								
                                   <table id="poTable" class="table table-striped table-bordered table-condensed table-hover dataTable">
                                        <thead>
                                            <tr class="active" role="row">
												<th>Código (程式碼)</th>
                                                <th style="width:300px; padding-right:5px;">Item (物品)</th>
												<!-- <th style="width:25px; padding-right:5px;" rowspan="1" colspan="1">Unid.</th> -->
												<!-- <th>Observación</th> -->
												<th style="width:100px; padding-right:5px;" >PrecUnit (單價)</th>
												<th>IVA% (稅)</th>
												<!-- <th>Cant.IVA</th> -->
												<!-- style="width:25px; padding-right:5px;" -->
                                                <th style="width:100px; padding-right:5px;" rowspan="1" colspan="1">Cant (數量)</th>
<!-- 											<th style="width:100px; padding-right:5px;" rowspan="1" colspan="1">Descuento%</th>
												<th style="width:70px; padding-right:5px;" rowspan="1" colspan="1">V.Desc</th> -->
                                                <th>Subtotal (小計)</th>
                                                <th class="col-xs-1 text-center" (click)="delete_art_todo()" style="width:25px;"><i class="fa fa-trash-o" title="Remover todos" ></i></th>
                                            </tr>
                                        </thead>
                                        <tbody *ngIf="articulos_pedido.length > 0">
											<tr *ngFor="let el of articulos_pedido;">
												<td>{{el.codart}}</td>
												<td style="min-width:200px;">
													<!-- {{el.nomart}} -->
													<!-- <input #nomart class="form-control input-sm kb-pad text-center rquantity" name="nomart" type="text" placeholder="Puede cambiar el nombre del articulo"    -->
													<!-- value="{{el.nomart}}"  (keyup.enter)="update_nomart(el.codart,el.index,nomart.value)" (blur)="update_nomart(el.codart,el.index,nomart.value)"> -->
													
													<textarea *ngIf="srv.getTipacc()=='P'"  #nomart name="nomart"  rows="3" cols="2" placeholder="Puede cambiar el nombre del articulo"  value="{{el.nomart}}" 
													(blur)="update_nomart(el.codart,el.index,nomart.value)" (change)="update_nomart(el.codart,el.index,nomart.value)" (keypress)='validaEnter($event,nomart.value)'
													 class="pa form-control kb-text" disabled></textarea>
													
													<textarea *ngIf="srv.getTipacc()=='T'" #nomart name="nomart"  rows="3" cols="2" placeholder="Puede cambiar el nombre del articulo"  value="{{el.nomart}}" 
													(blur)="update_nomart(el.codart,el.index,nomart.value)" (change)="update_nomart(el.codart,el.index,nomart.value)" (keypress)='validaEnter($event,nomart.value)'
													 class="pa form-control kb-text"></textarea>


													<!-- <input #nomart class="form-control input-sm kb-pad text-center rquantity" name="nomart" type="text" placeholder="Puede cambiar el nombre del articulo"    -->
													<!-- value="{{el.nomart}}"  (keyup.enter)="update_nomart(el.codart,el.index,nomart.value)" (blur)="update_nomart(el.codart,el.index,nomart.value)"> -->

												</td>

							<!-- 		UNIDAD COMENTADA			<td>{{el.coduni}}</td> -->
												
												<!-- <td> -->
													<!-- <input #observacion class="form-control input-sm kb-pad text-center rquantity" name="observacion[]" type="text" placeholder="{{el.observ}}"    -->
													<!-- value=""  (keyup.enter)="update_observ(el.codart, observacion.value)" (blur)="update_observ(el.codart, observacion.value)"> -->
												<!-- </td> -->
												<td style="padding:2px;">
													<!-- <div class="text-center"> -->
															<!-- USD {{el.prec01}}	 -->
													<!-- </div> -->
													
													<!-- <div class="text-center"> -->
													
													 <input *ngIf="srv.getTipacc()=='P'"  #prec class="form-control input-sm kb-pad text-center rquantity" name="precio" type="number" inputmode="numeric" step=".01"
													 value="{{el.prec01}}" (keypress)='validaNumericos($event,prec.value)' (keyup.enter)="update_precio(el.codart,el.index,prec.value)" (change)="update_precio(el.codart,el.index,prec.value)" disabled>
													
													 <input *ngIf="srv.getTipacc()=='T'"  #prec class="form-control input-sm kb-pad text-center rquantity" name="precio" type="number" inputmode="numeric" step=".01"
													 value="{{el.prec01}}" (keypress)='validaNumericos($event,prec.value)' (keyup.enter)="update_precio(el.codart,el.index,prec.value)" (change)="update_precio(el.codart,el.index,prec.value)">
													<!-- </div> -->
										

												</td>
												<td style="padding:2px;">
													<div class="text-center">{{el.poriva}}%</div>
												</td>
												<!-- <td style="padding:2px;"> -->
													<!-- <div class="text-center">USD {{el.precio_iva}}</div> -->
												<!-- </td>												 -->
												<td style="padding:2px;">
												<!-- (change)= -->
													<!-- <input #cant class="form-control input-sm kb-pad text-center rquantity" name="cantidad" type="number" inputmode="numeric" -->
													<!-- value="{{el.cant}}" (keypress)='validaNumericosCantidad($event)' (keyup.enter)="update(el.codart, cant.value)" (blur)="update(el.codart, cant.value)"> -->
												    <input #cant class="form-control input-sm kb-pad text-center rquantity" name="cantidad" type="number" inputmode="numeric" step=".01"
													value="{{el.cant}}" (keypress)='validaNumericos($event)' (keyup.enter)="update(el.codart,el.index,cant.value)" (change)="update(el.codart,el.index,cant.value)" disabled>
												</td>
<!-- 												<td style="padding:2px;">
													<input #porc_desc class="form-control input-sm kb-pad text-center rquantity" name="porc_desc[]" type="number" inputmode="numeric" step=".01"
													value="{{el.punreo}}" (keypress)='validaNumericos($event)' (keyup.enter)="update_art_desc(el.codart,el.index,porc_desc.value)" (change)="update_art_desc(el.codart,el.index,porc_desc.value)" disabled>
												</td>
												
												<td> <div class="text-center">USD {{redondear(el.v_desc_art)}}</div> </td> -->

												<td style="padding:2px;">
<!-- 													<div class="text-center"> USD {{redondear(el.subtotal_art)}}</div> -->
													<div class="text-center"> USD {{redondear(el.subtotal_art+el.precio_iva)}}</div>
												</td>
												
												<td (click)="delete_art(el.nomart,el.index)" class="text-center">
													<i class="fa fa-trash-o tip pointer spodel" title="Remover artículo"></i>
												</td>
											</tr>
                                        </tbody>
										
										<tbody *ngIf="articulos_pedido.length == 0">
											<tr>
											<td class="text-center" colspan="12">Agregar el producto a través de la búsqueda en el campo de arriba</td>
											</tr>
										</tbody>
										

								
                                    </table>
									
                                </div>
								<!-- <input *ngIf="tipo_busqueda"  type="submit" name="busca_articulo" value="Habilitar descuentos" class="btn btn-danger" (click)="busca_articulo()"> -->
                            </div>
                        </div>

				<div class="box-body">
                    <div class="col-lg-12">
						<div class="row">

						<div class="col-md-4 col-sm-6 col-xs-12">
							<div class="info-box">
							<!-- <span class="info-box-icon bg-aqua"><i class="ion ion-ios-cart-outline"></i></span> -->
							<span class="info-box-icon bg-aqua"><i class="fa fa-fw fa-cart-plus"></i></span>

							<div class="info-box-content">
								<span class="info-box-text">SUBTOTAL ( 小計 )</span>
								<span class="info-box-number">USD {{ redondear (subtotal)}}</span>
								
								<!-- <span class="info-box-number">TOTALES KG</span> -->
								<span *ngIf="desc_cant > 0" class="info-box-text">T.NETO = <span style="color:green;font-weight: bold;" >${{redondear(total_neto)}}</span></span>
								<!-- <span *ngIf="desc_cant > 0" class="info-box-text">T.DESC= <span style="color:red;font-weight: bold;" >-${{redondear(desc_cant)}}</span></span> -->
								<span  *ngIf="desc_cant > 0" class="info-box-text">T.DESC= <span style="color:red;font-weight: bold;" >-${{redondear(desc_cant)}}</span></span>

								</div>
							</div>
						</div>
						
						
						<div class="col-md-4 col-sm-6 col-xs-12">
							<div class="info-box">
							<span class="info-box-icon bg-green"><i class=" fa fa-fw fa-info-circle"></i></span>
							<div class="info-box-content">
								<span class="info-box-text">TOTAL IVA ( 總稅額 )</span>
								<span class="info-box-number">USD {{ redondear (iva_cant_new)}}</span>
							</div>
							</div>
						</div>
								
						
					
						<div class="col-md-4 col-sm-6 col-xs-12">
							<div class="info-box">
							<span class="info-box-icon bg-yellow"><i class="fa fa-fw fa-dollar"></i></span>
							<div class="info-box-content">
								<span  class="info-box-number ">TOTAL A FACTURAR ( 發票總額 )</span>
								<span style="color:red" class="info-box-number">USD {{ redondear (total)}}</span>
							</div>
							</div>
						</div>
						
						

						</div>
						
						<div *ngIf="srv.getConfTotalRecibidoCambioPdv() != 'NO'" class="row">
							<div class="col-md-4">
									<div class="form-group">
										<label>TOTAL RECIBIDO</label>                              
									<input type="text" type="number" inputmode="numeric" style="color:red" placeholder="INGRESE MONTO" name="total_recibido" value="" (blur)="calc_cambio()" (keyup.enter)="calc_cambio()" id="total_recibido" [(ngModel)]="total_recibido" class="form-control tip info-box-number">
									</div>
								</div>
							<div class="col-md-4">
									<div class="form-group">
										<label>CAMBIO</label>                              
										<input style="color:blue" type="number" inputmode="numeric"  placeholder="cambio" name="cambio" disabled value="USD {{ redondear (cambio)}}" class="form-control tip info-box-number">
									</div>
							</div>
						</div>
					</div> <!--  class="col-lg-12 -->
				</div>


						
						 <div *ngIf="ver_barra_busqueda" class="row">
							<div *ngIf="srv.getConfSeleccArtServPdv()=='SI'" class="col-md-2">
                                <div class="form-group">
                                    <!-- <label>PRODUCTO O SERVICIO</label>  -->
									<td class= "text-center">
									<label  class="switch">
									<input type="checkbox" checked (click)="tipo_entrada()"><span class="slider round"></span>
									</label>
									</td>
									<label  *ngIf="tipo_busqueda" >ARTÍCULO</label> 
									<label  *ngIf="!tipo_busqueda" >SERVICIO</label> 
								</div>
							</div>
			
							<div *ngIf="srv.getConfSeleccArtServPdv()=='SI'"  class="col-md-10">
									<div class="form-group">
															
									<label *ngIf="tipo_busqueda" >BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL ARTÍCULO </label>
									<label *ngIf="!tipo_busqueda" >BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL SERVICIO </label>
									
									
									<input *ngIf="tipo_busqueda"  type="text" placeholder="BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL ARTÍCULO " name="reference" value="" class="form-control tip" id="reference" (keyup.enter)="busca_articulo()"  [(ngModel)]="patron_articulo">
									<input *ngIf="tipo_busqueda"  type="submit" name="busca_articulo" value="Buscar artículo" class="btn btn-primary" (click)="busca_articulo()">
									
									<input *ngIf="!tipo_busqueda"  type="text" placeholder="BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL SERVICIO " name="reference" value="" class="form-control tip" id="reference" (keyup.enter)="busca_servicio()"  [(ngModel)]="patron_articulo">
									<input *ngIf="!tipo_busqueda"  type="submit" name="busca_articulo" value="Buscar servicio" class="btn btn-danger" (click)="busca_servicio()">
									
									</div>
							 </div>
							<div *ngIf="srv.getConfSeleccArtServPdv()=='NO'"  class="col-md-12">
									<div class="form-group">
															
									<label *ngIf="tipo_busqueda" >BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL ARTÍCULO </label>
									<label *ngIf="!tipo_busqueda" >BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL SERVICIO </label>
									
									
									<input *ngIf="tipo_busqueda"  type="text" placeholder="BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL ARTÍCULO " name="reference" value="" class="form-control tip" id="reference" (keyup.enter)="busca_articulo()"  [(ngModel)]="patron_articulo">
									<input *ngIf="tipo_busqueda"  type="submit" name="busca_articulo" value="Buscar artículo" class="btn btn-primary" (click)="busca_articulo()">
									
									<input *ngIf="!tipo_busqueda"  type="text" placeholder="BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL SERVICIO " name="reference" value="" class="form-control tip" id="reference" (keyup.enter)="busca_servicio()"  [(ngModel)]="patron_articulo">
									<input *ngIf="!tipo_busqueda"  type="submit" name="busca_articulo" value="Buscar servicio" class="btn btn-danger" (click)="busca_servicio()">
									
									</div>
							 </div>
							<div class="form-group"  *ngIf="this.exist_articulo">
								<p>Resultado de la busqueda por <<{{this.patron_articulo}}>></p>
								<div class="table-responsive-pedidos">
									<table class="table table-striped table-bordered table-condensed table-hover dataTable">
									   <thead>
										  <tr class="active" role="row">
											 <th>Código</th>
											 <th>Nombre</th>
											 <th class="text-center">Precio unit</th>
											 <th style="width:25px; padding-right:5px;" >Dispon</th>
											 <th style="width:25px; padding-right:5px;" rowspan="1" colspan="1" >Selec</th>
										  </tr>
									   </thead>
									   <tbody role="alert">
										  <tr  *ngFor="let articulos of articulo;">
											 <td class="">{{articulos.codart}}</td>
											 <td class="">{{articulos.nomart}}</td>
											 <td class="text-center">
												<span *ngIf="articulos!==edit_articulos">{{articulos.prec01}}  </span>
												<!-- <input type="text" *ngIf="articulos===articulos" [(ngModel)]="task.title" (blur)="update()" (keyup.enter)="update()"> -->
												<!-- <input type="text" *ngIf="articulos===edit_articulos" > -->
												
											<select  *ngIf="articulos===edit_articulos"  name="nuevo_precio_renglon" [(ngModel)]="nuevo_precio_renglon" (change)="edit_prec_renglon(articulos.codart)" class="form-control select2 tip" style="width:100%;">
											<option [ngValue]="undefined" disabled  selected>Seleccione</option>
											<option *ngFor="let e of lista_prec; let i = index;" [selected] = "i==0" [value]="e.prec">{{e.prec}}</option>
											</select>
												
												
												
												
												<!-- {{articulos.prec01}} -->
											<!-- <a *ngIf="srv.getConfEditPedido() != 'NO'" routerLink="/admin/editar_pedidos" [queryParams]="{usuario:usuario,empresa: empresa,pedido:el.numtra}" class="tip btn btn-warning btn-xs"><i class="fa fa-edit" title="Editar pedido"></i></a>  -->
											<a *ngIf="articulos!==edit_articulos"  (click)="edit_prec(articulos)" class="tip btn btn-warning btn-xs"><i class="fa fa-edit" title="Editar precio"></i></a> 	
											 </td>
											 <td class="">{{articulos.exiact}}</td>
											 <td class=""> 
											  <!-- <input  type="checkbox"/> -->
											  <input  type="checkbox" [(ngModel)]="articulos.isSelected" name="list_name" value="{{articulos.nomart}}" (change)="isAllSelected()"/>
											 </td>
										  </tr>
										</tbody>
									</table>
								</div>
								<div class="col-md-5">
									<input type="submit" name="inserta_pedido" value="Insertar a factura" class="btn btn-danger" (click)="inserta_pedido()">
										<p>{{elements_checkedList.length}}  Items seleccionados</p>
								</div>
							</div>
						</div>
					<div class="box-header">
						<h3 style="font-weight:bold;" class="box-title">OBSERVACIÓNES DE LA FACTURA</h3>
					</div>
					<div class="box-body">
						<div class="form-group">
							<textarea *ngIf="srv.getTipacc()=='T'" [(ngModel)]="observacion_factura"  name="observacion"  rows="2" cols="2" placeholder="Puede escribir observaciones de la factura"  value="" class="pa form-control kb-text"></textarea>
							<textarea *ngIf="srv.getTipacc()=='P'" [(ngModel)]="observacion_factura"  name="observacion"  rows="2" cols="2" placeholder="Puede escribir observaciones de la factura"  value="" class="pa form-control kb-text" disabled></textarea>
						</div>
					</div>

				<div *ngIf="srv.getTipacc()=='T'" class="box-header"> 
					<label style="color:red;font-weight:bold" >DESEA FACTURAR LA SOLICITUD DE ENVIO:</label><br>
					<label >SI</label>
					<input type="radio" name="seguro_si" id="seguro_si"   [(ngModel)]="facturar_envio" [ngStyle]="{'margin-left': '10px', 'margin-right': '15px'}" value="SI" autocomplete="on">
					<label >NO</label>
					<input type="radio" name="seguro_no" id="seguro_no"   [(ngModel)]="facturar_envio" [ngStyle]="{'margin-left': '10px'}" value="NO" autocomplete="on">
				</div>

				<div *ngIf="srv.getTipacc()=='T' && facturar_envio== 'SI'" class="box-header">
                    <h3 style="font-weight:bold;" class="box-title">FORMA DE COBRO</h3>
                </div>
				
				
				<div *ngIf="srv.getTipacc()=='T' && facturar_envio== 'SI'" class="box-body">
                    <div class="col-lg-12">
						<div class="row">
							<div *ngIf="srv.getConfPagoEfectivo() == 'SI'" class="col-md-3">
							<div class="form-group">
									<!-- <input  type="checkbox" [(ngModel)]="check_efectivo" name="check_efectivo" value="1" (change)="forma_pago('efectivo')"/> -->
							        <label>
									
									<input type="checkbox"  *ngIf="!check_credito" [(ngModel)]="check_efectivo" name="check_efectivo"  (change)="forma_pago('efectivo')" > EFECTIVO
									<!-- <input type="checkbox" *ngIf="check_credito"  [(ngModel)]="check_efectivo" name="check_efectivo" disabled > EFECTIVO -->
									
									</label>
									<input *ngIf="!check_efectivo"  type="number" inputmode="numeric" placeholder="Ingrese Monto" name="monto_efectivo" disabled  class="form-control tip">
									<input *ngIf="check_efectivo" type="number" inputmode="numeric" placeholder="Ingrese Monto" name="monto_efectivo"  style="color:blue" [(ngModel)]="monto_efectivo" class="form-control tip info-box-number">
							</div>
							</div>
							

								<div *ngIf="srv.getConfPagoCheque() == 'SI'" class="col-md-3">
									<div class="form-group">
										<label>
											<input type="checkbox" *ngIf="!check_credito"  [(ngModel)]="check_cheque" name="check_cheque"  (change)="forma_pago('cheque')" >
											CHEQUE
										</label>                              
										<input *ngIf="!check_cheque"  type="number" inputmode="numeric"  placeholder="Monto USD" name="monto_cheque" disabled value=""  class="form-control tip ">
										<!-- <input *ngIf="!check_cheque"  type="text"  placeholder="Num Cheque" name="num_cheque" disabled value="" class="form-control tip"> -->
										<!-- <input *ngIf="!check_cheque"  type="text"  placeholder="Seleccione Banco" name="banco" disabled value="" class="form-control tip"> -->
										
										
										<input *ngIf="check_cheque" type="number" inputmode="numeric"  placeholder="Monto USD" name="monto_cheque"  value="" style="color:blue" [(ngModel)]="monto_cheque" class="form-control tip info-box-number">
										<input *ngIf="check_cheque"  type="number" inputmode="numeric"  placeholder="Num Cheque" name="num_cheque" [(ngModel)]="num_cheque"  value="" class="form-control tip">
										<!-- <input *ngIf="check_cheque"  type="text"  placeholder="Seleccione Banco" name="banco"  value="" class="form-control tip"> -->
										<select *ngIf="check_cheque" name="bancos_lista" [(ngModel)]="codban" class="form-control select2 tip" style="width:100%;">
										<option [ngValue]="undefined" selected>Seleccione</option>
										<option *ngFor="let e of bancos_lista; let i = index;" [selected] = "i==0" [value]="e.codban">{{e.nomban}}</option>
										</select>
										
										
										
									</div>
								</div>
								<div *ngIf="srv.getConfPagoTarjeta() == 'SI'" class="col-md-3">
									<div class="form-group">
										<label>
										<input type="checkbox" *ngIf="!check_credito" [(ngModel)]="check_tarjeta" name="check_tarjeta"  (change)="forma_pago('tarjeta')" >
										TARJETA
										</label>
										<input *ngIf="!check_tarjeta" type="number" inputmode="numeric"  placeholder="Monto USD" name="monto_tarjeta" disabled value=""  class="form-control tip">										
										<!-- <input *ngIf="!check_tarjeta" type="text"  placeholder="Num Tarjeta" name="num_tarjeta" disabled value="" class="form-control tip"> -->
										<!-- <input *ngIf="!check_tarjeta" type="text"  placeholder="Selecc Tarjeta" name="tipo_tarjeta" disabled value="" class="form-control tip"> -->
										
										<input *ngIf="check_tarjeta" type="number" inputmode="numeric" placeholder="Monto USD" name="monto_tarjeta"  value="" style="color:blue" [(ngModel)]="monto_tarjeta" class="form-control tip info-box-number">										
										<input *ngIf="check_tarjeta" type="number" inputmode="numeric"  placeholder="Cod Recab" name="Cod Recab"  [(ngModel)]="num_tarjeta"  value="" class="form-control tip">
										<!-- <input *ngIf="check_tarjeta" type="text"  placeholder="Selecc Tarjeta" name="tipo_tarjeta"  value="" class="form-control tip"> -->
									
										<select *ngIf="check_tarjeta" name="tarjeta_lista" [(ngModel)]="codtar" class="form-control select2 tip" style="width:100%;">
										<option [ngValue]="undefined" selected>Selecc tipo</option>
										<option *ngFor="let e of tarjetas_lista; let i = index;" [selected] = "i==0" [value]="e.codtar">{{e.nomtar}}</option>
										</select>
									
									</div>
								</div>
								<div *ngIf="srv.getConfPagoTrans() == 'SI'"  class="col-md-3">
									<div class="form-group">
										<label>
										<input type="checkbox" *ngIf="!check_credito" [(ngModel)]="check_trasf_dep" name="check_trasf_dep"  (change)="forma_pago('tranf')" >
										TRANSFERENCIA / DEPOSITO
										</label>
										<input *ngIf="!check_trasf_dep" type="number" inputmode="numeric"  placeholder="Monto USD" name="monto_transferencia" disabled value=""  class="form-control tip">										

										
										<input *ngIf="check_trasf_dep" type="number" inputmode="numeric" placeholder="Monto USD" name="monto_transferencia"  value="" style="color:blue" [(ngModel)]="monto_transferencia" class="form-control tip info-box-number">										
										<input *ngIf="check_trasf_dep" type="number" inputmode="numeric"  placeholder="Num tranf/dep" name="Codtranf"  [(ngModel)]="num_tranf"  value="" class="form-control tip">
									
										<select *ngIf="check_trasf_dep" name="cta_tranf" [(ngModel)]="coddep" class="form-control select2 tip" style="width:100%;">
										<option [ngValue]="undefined" selected>Selecc tipo</option>
										<option *ngFor="let e of cuentas_lista; let i = index;" [selected] = "i==0" [value]="e.coddep">{{e.coddep}}-{{e.banco}}</option>
										</select>
									
									</div>
								</div>
								
								</div>
								<div class="row">
								
								<div *ngIf="srv.getConfPagoCredito() == 'SI'" class="col-md-3">
									<div class="form-group">
										<label>
										<input type="checkbox" [(ngModel)]="check_credito" name="check_credito"  (change)="forma_pago('credito')" >
										CREDITO
										</label>
										
										<table *ngIf="!check_credito">
											<tr>
												<td style="font-weight:bold;" >Monto de credito</td>
												<td>
													<input *ngIf="!check_credito" type="number" inputmode="numeric" placeholder="Monto credito USD" name="monto_credito" disabled value=""  class="form-control tip">	
												</td>
											</tr>
										</table>										
									
										<table *ngIf="check_credito">
											<tr>
												<td style="font-weight:bold;">Monto de credito</td>
												<td>
													<input *ngIf="check_credito" disabled type="number" inputmode="numeric" placeholder="Monto USD" name="monto_credito"  value="{{redondear (total)}}" style="color:blue" [(ngModel)]="monto_credito" class="form-control tip info-box-number">
												</td>
											</tr>
											<tr>
												<td style="font-weight:bold;">Num. de pagos</td>
												<td>
													<input *ngIf="check_credito && srv.getConfEdicionPlazoCredito()=='SI'" type="number" inputmode="numeric" placeholder="Numero de pagos" name="num_pagos_credito"  [(ngModel)]="num_pagos_credito"  value="" style="color:blue" class="form-control tip info-box-number">
													<input *ngIf="check_credito && srv.getConfEdicionPlazoCredito()=='NO'" type="number" inputmode="numeric" placeholder="Numero de pagos" name="num_pagos_credito"  [(ngModel)]="num_pagos_credito"  value="" style="color:blue" disabled class="form-control tip info-box-number">
												</td>
											</tr>
											<tr>
												<td style="font-weight:bold;" >Plazo de dias por pagos</td>
												<td>
													<input *ngIf="check_credito && srv.getConfEdicionPlazoCredito()=='SI'" type="number" inputmode="numeric" placeholder="Plazo de dias pagos" name="plazo_dias_pagos"  [(ngModel)]="plazo_dias_pagos"  value="" style="color:blue" class="form-control tip info-box-number">
													<input *ngIf="check_credito && srv.getConfEdicionPlazoCredito()=='NO'" type="number" inputmode="numeric" placeholder="Plazo de dias pagos" name="plazo_dias_pagos"  [(ngModel)]="plazo_dias_pagos"  value="" style="color:blue" disabled class="form-control tip info-box-number">
												</td>
											</tr>
										</table>	
													
									</div>
								</div>
								
								<!-- <div *ngIf="srv.getConfPagoCredito() == 'SI'" class="col-md-3"> -->


						</div>


					</div> <!--  class="col-lg-12 -->

				</div> <!-- BODY -->

						
					</div>  <!--  class="col-lg-12 -->  
				</div> <!-- BODY-->
			</div>

<div class="box box-primary">
			<div class="box-header with-border">
				<h3 style="color:red;font-weight:bold" class="box-title">
					Subir foto envío ( 上傳出貨照片 )
				</h3>
			</div>
			<div class="box-body">
				<div class="row">

					<div class="col-lg-12">
					<div  class="col-md-4">
					<div class="input-group">

					<div class="custom-file">
						<input (change)="fileChange($event)"  type="file"  class="custom-file-input" id="exampleInputFile" accept="image/*" > 
						<!-- <label class="custom-file-label" for="inputGroupFile01">Choose file</label> -->
						<label class="custom-file-label" for="exampleInputFile" data-browse="Buscar" >{{nombre_archivo}}</label>
					</div>
					
					</div>
					<div class="progress form-group" *ngIf="progress > 0">
					<div class="progress-bar progress-bar-striped bg-success" role="progressbar" [style.width.%]="progress">
					</div>
				
					</div>
								<span *ngIf="progress > 0">Subiendo archivo..!!. Progreso: {{progress}}%</span>
						
						
					</div>
					<div *ngIf="subida_exitosa" class="col-md-4">
					<span>IMAGEN SUBIDA CON EXITO...!!!</span>
					</div>
					
					<div  class="text-center" *ngIf="(imageFile && !loading)" >
					<!-- <div  class="text-center" > -->
						<br> Comprimido: tamaño: {{sizeOFCompressedImage | number : '1.2-2'}}MB
						<br>
						<img [src]="localCompressedURl" height="150px">	
						<!-- <div class="input-group-prepend"> -->
						<button class="btn btn-danger" id="btnUpload" (click)="upload('CLIENTE')">Subir (卡加照片)</button>
						<!-- </div> -->
					</div>	
					</div>
				</div>
				<!-- A PARTIR DE AQUI FORM GROUP VER IMAGENES-->
				<div  class="form-group">
					<div class="box-body">
						<div class="col-lg-12">
						
						<div class="table-responsive">
					<!-- A PARTIR DE AQUI ES LAS IMAGENES-->
					<div class="single-product-area">
						<div class="zigzag-bottom"></div>
						<div class="container">
							<div class="row">
							
								<div *ngFor="let img of fotos" class="col-md-3 col-sm-6">
									<div class="single-shop-product">
										<div class="product-upper text-center">
											<a href="{{img.src}}" target="_blank">
											<img src="{{img.src}}" width="262" height="243"  alt="">
											</a>
											<!-- <img src="articulos.imagen" *ngIf="(ver_factura==0)"  alt=""> -->
										</div>
										<div  class="product-option-shop">
											 <button class="btn btn-danger" id="btnUpload" (click)="eliminar_imagen_cliente(img.nombre)">Eliminar ( 排除 )</button>
                        				</div>  

									</div>                  
									</div>
								</div>

							</div>
				
						</div>
					</div>
					<!-- TERMINA AQUI ES LAS IMAGENES			 -->
						</div>
                    </div>
				</div>
			</div>
	</div>

	<div *ngIf="(srv.getTipacc()=='T') || (srv.getTipacc()=='P' && ver_factura!=0)" class="box box-primary">
			<div class="box-header with-border">
				<h3 style="color:red;font-weight:bold" class="box-title">
				     Foto antes envío ( 出貨前照片 )
				</h3>
			</div>
			<div class="box-body">
				<div class="row">

					<div class="col-lg-12">
					<div  class="col-md-4">
					<div class="input-group">

					<div class="custom-file">
						<input (change)="fileChange($event)"  type="file"  class="custom-file-input" id="exampleInputFile" accept="image/*" > 
						<!-- <label class="custom-file-label" for="inputGroupFile01">Choose file</label> -->
						<label class="custom-file-label" for="exampleInputFile" data-browse="Buscar" >{{nombre_archivo}}</label>
					</div>
					
					</div>
					<div class="progress form-group" *ngIf="progress > 0">
					<div class="progress-bar progress-bar-striped bg-success" role="progressbar" [style.width.%]="progress">
					</div>
				
					</div>
								<span *ngIf="progress > 0">Subiendo archivo..!!. Progreso: {{progress}}%</span>
						
						
					</div>
					<div *ngIf="subida_exitosa" class="col-md-4">
					<span>IMAGEN SUBIDA CON EXITO...!!!</span>
					</div>
					
					<div  class="text-center" *ngIf="(imageFile && !loading)" >
					<!-- <div  class="text-center" > -->
						<br> Comprimido: tamaño: {{sizeOFCompressedImage | number : '1.2-2'}}MB
						<br>
						<img [src]="localCompressedURl" height="150px">	
						<!-- <div class="input-group-prepend"> -->
						<button class="btn btn-danger" id="btnUpload" (click)="upload('JETTA')">Subir</button>
						<!-- </div> -->
					</div>	
					</div>
				</div>
				<!-- A PARTIR DE AQUI FORM GROUP VER IMAGENES-->
				<div  class="form-group">
					<div class="box-body">
						<div class="col-lg-12">
						
						<div class="table-responsive">
					<!-- A PARTIR DE AQUI ES LAS IMAGENES-->
					<div class="single-product-area">
						<div class="zigzag-bottom"></div>
						<div class="container">
							<div class="row">
							
								<div *ngFor="let img of fotos_jetta" class="col-md-3 col-sm-6">
									<div class="single-shop-product">
										<div class="product-upper text-center">
											<a href="{{img.src}}" target="_blank">
											<img src="{{img.src}}" width="262" height="243"  alt="">
											</a>
											<!-- <img src="articulos.imagen" *ngIf="(ver_factura==0)" alt=""> -->
										</div>
										<div  class="product-option-shop">
											 <button  class="btn btn-danger" id="btnUpload" (click)="eliminar_imagen_jetta(img.nombre)">Eliminar ( 排除 )</button>
                        				</div>  

									</div>                  
									</div>
								</div>

							</div>
				
						</div>
					</div>
					<!-- TERMINA AQUI ES LAS IMAGENES			 -->
						</div>
                    </div>
				</div>
			</div>
	</div>
  
	  <div class="box box-primary">
						  <div class="box-body">
							  <div class="col-lg-12">
								  <div class="form-group">
									  <input *ngIf="(ver_factura==0)" #generar_pe type="submit" (click)="generar_pdv()"  name="add_purchase" value="Guardar solicitud de envío" class="btn btn-primary">
									  <input  #regresar_lista  routerLink="/admin/lista_envios" [queryParams]="{usuario:usuario,empresa:empresa}" type="submit"  name="add_purchase" value="Ir a lista de envios" class="btn btn-danger">
<!-- 									  <button type="button" (click)="transmitir_guia_courier()" class="btn btn-success">GENERAR GUIA COURIER</button> -->
									  <!-- <input routerLink="/admin/lista_recibos" [queryParams]="{usuario:usuario}" type="submit"  name="add_purchase" value="Ir a lista de recibos" class="btn btn-danger"> -->
								  </div>
								  <div class="clearfix"></div>
							  </div>
						  </div>
					  </div>
				  </form>
			  </div>
		  </div>
	  </section>
	<!-- /.content -->
  </div>
  