<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
      <!-- Page Header 1111 -->
	   Punto de venta
      <!-- <small>FECHA:{{jstoday}} ALMACEN:{{almacen_nombre}}/CAJA:{{caja}}/TURNO:{{turno}}</small> -->
    </h1>
    <ol class="breadcrumb">
      <!-- <li><i class="fa fa-dashboard"></i>Punto de venta</li> -->
      <!-- <li class="active">Punto de venta</li> -->
	  
	  <!-- <li>FECHA</li> -->
      <!-- <li class="active">{{jstoday}}</li> -->
	  <li style="color:red" >ALMACEN: </li>
      <li style="font-weight:bold;" class="active">{{almacen_nombre}}</li>
	  <li style="color:red" >CAJA</li>
      <li style="font-weight:bold;" class="active">{{caja}}</li>
	  <li style="color:red">TURNO:</li>
      <li style="font-weight:bold;" class="active">{{turno}}</li>
	  
	  
	  
    </ol>
  </section>

  <!-- Main content -->
  <section class="content">

    <!-- Your Page Content Here -->
	
	
	 <div class="row">
        <div class="col-xs-12">
		
			<div class="box box-primary" *ngIf="loading_modulo">
					<div class="text-center box-header">
					  <h3 class="box-title ">Generando factura...Por favor espere...!!!!</h3>
					</div>
					<div class="box-body">
					  <!-- <!-- <!-- The body of the box -->  
					</div>
					<div class="overlay">
					  <i class="fa fa-refresh fa-spin"></i>
					</div>
			</div>
		
		<!-- getActImportPedidoPdv() -->
		
		
		  <div class="nav-tabs-custom" *ngIf="!loading_modulo">
            <ul class="nav nav-tabs">
			    <!-- <li id="facturacion"   class="active" #facturacion ><a href="#tab_facturacion" data-toggle="tab" style="font-weight:bold;color:red" (click)="cambio_vista_cliente('false')" >FACTURACIÓN</a></li> -->
                <!-- <li id="crear_cliente" #crear_cliente ><a href="#tab_crear_cliente"  data-toggle="tab" style="font-weight:bold;color:blue" (click)="cambio_vista_cliente('true')" >CREACIÓN CLIENTE</a></li> -->
				
				<li id="facturacion"    #facturacion class="active" ><a href="#tab_facturacion" data-toggle="tab" style="font-weight:bold;color:red" >FACTURACIÓN</a></li>
                <li id="crear_cliente" #crear_cliente ><a href="#tab_crear_cliente"  data-toggle="tab" style="font-weight:bold;color:blue" >CREACIÓN CLIENTE</a></li>
				<li *ngIf="numtra == 0 && srv.getActImportPedidoPdv() == 'SI'" id="importar_pedido"  #importar_pedido ><a href="#tab_importar_pedido"  data-toggle="tab" style="font-weight:bold;color:green" >IMPORTAR PEDIDO</a></li>
			</ul>
			
			<div class="tab-content">
			<div class="tab-pane active" id="tab_facturacion" #tab_facturacion >
		
            <!-- <div class="box box-primary"> -->

				<div class="box-header">
                    <h3 style="font-weight:bold;" class="box-title">DATOS DEL CLIENTE</h3>
                </div>
                <div class="box-body">
                    <div class="col-lg-12">
				
						<div class="row">
							<!-- <div class="col-md-3"> -->
								<label style="font-weight:bold;color:red" >Fecha factura </label>
								<input [(ngModel)]="fectra" type="date" name="fectra" placeholder="dd-mm-yyyy" value="" min="2020-01-01" max="2030-12-31">
								
							<!-- </div> -->
						
						</div>

				
					  
					
				
                        <div class="row">
							<!-- <div class="col-md-6"> -->
							<!-- <label for="date">IDENTIFICACIÓN</label>  -->
									<!-- <div class="input-group"> -->
										<!-- <input type="text" name="code" id="add_item"   [(ngModel)]="razon_social" class="form-control ui-autocomplete-input"  -->
										<!-- (click)="!FLAG_BUSQUEDA_CLIENTE ? FLAG_BUSQUEDA_CLIENTE = true : FLAG_BUSQUEDA_CLIENTE = false"  -->
										<!-- placeholder="Ingrese cedula o ruc" -->
										<!-- > -->
										
										<!-- <div class="input-group-btn"> -->
											
											<!-- <!-- <select name="tipo_doc" [(ngModel)]="tipo_doc"  (change)="consumidor_final()" class="form-control select2 tip" style="width:100%;"> --> 
											<!-- <!-- <option [ngValue]="undefined" disabled  selected>Seleccione</option> --> 
											<!-- <!-- <option *ngFor="let e of tipo_doc_lista; let i = index;" [selected] = "i==0" [value]="e.tipo">{{e.nom_doc}}</option> --> 
											<!-- <!-- </select> --> 
											
											<!-- <button type="button" class="btn btn-danger">Buscar</button> -->
											<!-- <button type="button" class="btn btn-warning">Crear cliente</button> -->
										
										<!-- </div> -->
										
										<!-- <!-- <div class="input-group-addon no-print" style="padding: 2px 5px;" (click)="!FLAG_BUSQUEDA_CLIENTE ? FLAG_BUSQUEDA_CLIENTE = true : FLAG_BUSQUEDA_CLIENTE = false"> --> 
												<!-- <!-- <a id="add-customer" class="external" data-toggle="modal1" data-target="#myModal1"><i class="fa fa-2x fa-angle-down" id="searchIcon"></i></a> --> 
										<!-- <!-- </div> --> 
										
										
										<!-- <!-- <div class="input-group-addon no-print" style="padding: 2px 5px;"> --> 
											<!-- <!-- <a id="add-customer" class="external" data-toggle="modal" data-target="#myModal2"><i class="fa fa-2x fa-plus-circle" id="addIcon"></i></a> --> 
										<!-- <!-- </div> --> 
									<!-- </div> -->
							
							<!-- </div> -->
							
							<div class="col-md-2">
                                <div class="form-group">
									<td class= "text-center">
									<label  class="switch">
									<input type="checkbox" checked (click)="tipo_busqueda_cliente()"><span class="slider round"></span>
									</label>
									</td>
									<label  *ngIf="busqueda_cliente == 'IDENT'" >BUSQUEDA POR CEDULA/RUC</label> 
									<label  *ngIf="busqueda_cliente == 'RZ'" >BUSQUEDA RAZON SOCIAL</label> 
								</div>
							</div>
							
							<div *ngIf="busqueda_cliente == 'RZ'" class="col-md-4">
                                <!-- <div class="form-group"> -->
							
    							<label >BUSQUEDA POR RAZON SOCIAL</label>
							
								<!-- <div class="input-group"> -->
								
								<input   type="text" name="search_customer" id="search_customer" (keyup.enter)="busqueda_razon_social()"  [(ngModel)]="patron_cliente"  class="form-control ui-autocomplete-input" placeholder="Ingrese el nombre del cliente" autocomplete="off">
								<!-- <div (click)="busqueda_razon_social()" class="input-group-addon no-print" style="padding: 2px 5px;"> -->
									<!-- <a id="add-customer" class="external"><i class="fa fa-2x fa-search" id="searchIcon"></i></a> -->
								<!-- </div> -->
								
									
								<!-- </div> -->
								
								
								<!-- </div> -->
							</div>
						
						
						
						
                          
							<div *ngIf="busqueda_cliente == 'IDENT'" class="col-md-2">
                                <div class="form-group">
									<label for="date">TIPO</label>
									<select name="tipo_doc" [(ngModel)]="tipo_doc"  (change)="consumidor_final()" class="form-control select2 tip" style="width:100%;">
									<option [ngValue]="undefined" disabled  selected>Seleccione</option>
									<option *ngFor="let e of tipo_doc_lista; let i = index;" [selected] = "i==0" [value]="e.tipo">{{e.nom_doc}}</option>
									</select>
								</div>
                            </div>
			
							
							
							
                            <div  *ngIf="busqueda_cliente == 'IDENT'" class="col-md-2">
                                <div class="form-group">
                                    <label>NÚMERO IDENT </label>
									<input type="text" inputmode="numeric" (keypress)='validaNumericosCantidad($event)'  placeholder="Ingrese Identificación" name="ident" value="" class="form-control tip" (keyup.enter)="busca_cliente()" id="ident" [(ngModel)]="ruc">
								</div>
                            </div>
							
							
							<div  class="col-md-2">
                                <div class="form-group">
									<br> 
									<table>
										<tr>
											<td>
								
											<input *ngIf="busqueda_cliente == 'IDENT'" type="submit" name="busca_cliente" value="Buscar" class="btn btn-primary" (click)="busca_cliente()">
											<input *ngIf="busqueda_cliente == 'RZ'" type="submit" name="busca_cliente" value="Buscar" class="btn btn-primary" (click)="busqueda_razon_social()">
											</td>
											<td class="col-xs-7"> 
					
											<button type="button" id="cambio_crear_cliente" (click)="switchtab()" class="btn btn-warning" title="Crear cliente" ><i class="fa fa-fw fa-plus"></i></button>
											</td>
										</tr>
									</table>
								</div>
                            </div>
							
							
							
							
							
							
							<div class="col-md-4">
                                <div class="form-group">
														
								<label for="reference">NOMBRE Y APELLIDO Ó RAZÓN SOCIAL </label>
								<input *ngIf="!this.clientes" type="text" placeholder="Nombre ó Razón Social" id="add_item" class="form-control ui-autocomplete-input" autocomplete="off" disabled>
								<input *ngIf="this.clientes " type="text" placeholder="Nombre ó Razón Social" id="add_item"  value="{{razon_social}}" class="form-control ui-autocomplete-input" autocomplete="off" disabled>
						
								</div>
                            </div>
							
							<div *ngIf="srv.getActRegPlacaPDV() == 'SI'" class="col-md-4">
									<div class="form-group">
										<label>
										<span  style="font-weight:bold;color:red" >PLACA DEL VEHICULO</span>
										</label>
										<div class="input-group">
										<!-- <input   type="text" name="busqueda_placa" id="busqueda_placa" (keyup.enter)="busqueda_pedido_razonsocial()"   -->
										<!-- [(ngModel)]="patron_placa"  class="form-control ui-autocomplete-input" placeholder="Ingrese el nombre del cliente"  -->
										<!-- autocomplete="off"> -->
											<input type="text" [(ngModel)]="numplaca" placeholder="Inserte placa del vehiculo" name="placa_vehiculo" value="" 
											class="form-control tip info-box-number" style="font-weight:bold;color:blue" (keyup.enter)="busqueda_razonsocial_placa()" >
											
											<div (click)="busqueda_razonsocial_placa()" class="input-group-addon no-print" style="padding: 2px 5px;">
											<a id="add-customer" class="external"><i class="fa fa-2x fa-search" id="searchIcon"></i></a>
											</div> 
											</div>
										<!-- <input type="text" [(ngModel)]="numplaca" placeholder="Inserte placa del vehiculo" name="placa_vehiculo" value="" class="form-control tip info-box-number" style="font-weight:bold;color:blue"> -->
											
									</div>
							</div>
							
							
							
							
							
                        </div>
						
					</div>  <!--  class="col-lg-12 -->  
				</div> <!-- BODY-->
				
				<div class="form-group"  *ngIf="this.exist_razon_social">
						<p>Resultado de la busqueda por <<{{this.patron_cliente}}>></p>
						<div class="table-responsive-pedidos">
							<table class="table table-striped table-bordered table-condensed table-hover dataTable">
							   <thead>
								  <tr class="active" role="row">
									 <th>Razon Social</th>
									 <th class="text-center">Tipo ident</th>
									 <th class="text-center">Num Identificacion</th>
									 <th style="width:25px; padding-right:5px;" rowspan="1" colspan="1" >Selec</th>
								  </tr>
							   </thead>
							   <tbody>
								  <tr  *ngFor="let rz of razon_social_lista;">
									 <td>{{rz.nomcli}}</td>
									 <td class="text-center">{{rz.tpIdCliente}}</td>
									 <td class="text-center">{{rz.rucced}}</td>
									 <td class="text-center"> 
									  <input  type="radio"  name="radio_cliente" (change)="select_razon_social(rz.tpIdCliente,rz.rucced,rz.nomcli,rz.email,rz.codcli,rz.dircli)"  />
									  
									  <!-- <input type="radio" name="optionsRadios" id="optionsRadios1" [(ngModel)]="check_agencia" (change)="validar_exist_agencia('P')"  value="principal"> -->
									 </td>
								  </tr>
								</tbody>
							</table>
						</div>
						</div>
				
				
				<div class="box-header">
                    <h3 style="font-weight:bold;" class="box-title">DETALLE A FACTURAR</h3>
                </div>
				
				<div class="box-body">
                    <div class="col-lg-12">
						
					
						
						<!-- <div class="row"> -->
							<!-- <div class="col-md-2"> -->
                                <!-- <div class="form-group"> -->
                                    <!-- <label>RETENCION IVA</label>                               -->
									
									<!-- <select name="retencion_iva" [(ngModel)]="retencion_iva" class="form-control select2 tip" style="width:100%;"> -->
									<!-- <option [ngValue]="undefined" selected>Seleccione</option> -->
									<!-- <option *ngFor="let e of retencion_iva_lista; let i = index;" [selected] = "i==0" [value]="e.porret">{{e.nomret}}</option> -->
									<!-- </select> -->

								<!-- </div> -->
							<!-- </div> -->
							<!-- <div class="col-md-2"> -->
                                <!-- <div class="form-group"> -->
                                    <!-- <label>RETENC FUENTE</label>                               -->
									
									<!-- <select name="retencion_fuente" [(ngModel)]="retencion_fuente" class="form-control select2 tip" style="width:100%;"> -->
									<!-- <option [ngValue]="undefined" selected>Seleccione</option> -->
									<!-- <option *ngFor="let e of retencion_fuente_lista; let i = index;" [selected] = "i==0" [value]="e.codret">{{e.nomret}}</option> -->
									<!-- </select> -->

								<!-- </div> -->
							<!-- </div> -->
						<!-- </div> -->
						<div class="row">
							

							


                        </div>

						<!--################## EJEMPLO COMBO CON SELECT############## -->



                        <div class="row">
                            <div class="col-md-12">
                                <div class="table-responsive">
								
                                   <table id="poTable" class="table table-striped table-bordered table-condensed table-hover dataTable">
                                        <thead>
                                            <tr class="active" role="row">
												<th>Código</th>
                                                <th style="width:300px; padding-right:5px;">Item</th>
												<th style="width:25px; padding-right:5px;" rowspan="1" colspan="1">Unid.</th>
												<!-- <th>Observación</th> -->
												<th style="width:100px; padding-right:5px;" >Prec. Unit</th>
												<th>IVA%</th>
												<!-- <th>Cant.IVA</th> -->
												<!-- style="width:25px; padding-right:5px;" -->
                                                <th style="width:100px; padding-right:5px;" rowspan="1" colspan="1">Cantidad</th>
												<th style="width:100px; padding-right:5px;" rowspan="1" colspan="1">Descuento%</th>
												<th style="width:70px; padding-right:5px;" rowspan="1" colspan="1">V.Desc</th>
                                                <th>Subtotal</th>
                                                <th class="col-xs-1 text-center" (click)="delete_art_todo()" style="width:25px;"><i class="fa fa-trash-o" title="Remover todos" ></i></th>
                                            </tr>
                                        </thead>
                                        <tbody *ngIf="articulos_pedido.length > 0">
											<tr *ngFor="let el of articulos_pedido;">
												<td>{{el.codart}}</td>
												<td style="min-width:200px;">
													<!-- {{el.nomart}} -->
													<!-- <input #nomart class="form-control input-sm kb-pad text-center rquantity" name="nomart" type="text" placeholder="Puede cambiar el nombre del articulo"    -->
													<!-- value="{{el.nomart}}"  (keyup.enter)="update_nomart(el.codart,el.index,nomart.value)" (blur)="update_nomart(el.codart,el.index,nomart.value)"> -->
													
													<textarea #nomart name="nomart"  rows="3" cols="2" placeholder="Puede cambiar el nombre del articulo"  value="{{el.nomart}}" 
													(blur)="update_nomart(el.codart,el.index,nomart.value)" (change)="update_nomart(el.codart,el.index,nomart.value)" (keypress)='validaEnter($event,nomart.value)'
													 class="pa form-control kb-text"></textarea>
													
													<!-- <input #nomart class="form-control input-sm kb-pad text-center rquantity" name="nomart" type="text" placeholder="Puede cambiar el nombre del articulo"    -->
													<!-- value="{{el.nomart}}"  (keyup.enter)="update_nomart(el.codart,el.index,nomart.value)" (blur)="update_nomart(el.codart,el.index,nomart.value)"> -->

												</td>
												<!-- <td style="width:40px; padding-right:5px;">{{el.nomart}}</td> -->
												<td>{{el.coduni}}</td>
												<!-- <td> -->
													<!-- <input #observacion class="form-control input-sm kb-pad text-center rquantity" name="observacion[]" type="text" placeholder="{{el.observ}}"    -->
													<!-- value=""  (keyup.enter)="update_observ(el.codart, observacion.value)" (blur)="update_observ(el.codart, observacion.value)"> -->
												<!-- </td> -->
												<td style="padding:2px;">
													<!-- <div class="text-center"> -->
															<!-- USD {{el.prec01}}	 -->
													<!-- </div> -->
													
													<!-- <div class="text-center"> -->
													
													 <input #prec class="form-control input-sm kb-pad text-center rquantity" name="precio" type="number" inputmode="numeric" step=".01"
													 value="{{el.prec01}}" (keypress)='validaNumericos($event,prec.value)' (keyup.enter)="update_precio(el.codart,el.index,prec.value)" (change)="update_precio(el.codart,el.index,prec.value)">
													
													<!-- </div> -->
										

												</td>
												<td style="padding:2px;">
													<div class="text-center">{{el.poriva}}%</div>
												</td>
												<!-- <td style="padding:2px;"> -->
													<!-- <div class="text-center">USD {{el.precio_iva}}</div> -->
												<!-- </td>												 -->
												<td style="padding:2px;">
												<!-- (change)= -->
													<!-- <input #cant class="form-control input-sm kb-pad text-center rquantity" name="cantidad" type="number" inputmode="numeric" -->
													<!-- value="{{el.cant}}" (keypress)='validaNumericosCantidad($event)' (keyup.enter)="update(el.codart, cant.value)" (blur)="update(el.codart, cant.value)"> -->
												    <input #cant class="form-control input-sm kb-pad text-center rquantity" name="cantidad" type="number" inputmode="numeric" step=".01"
													value="{{el.cant}}" (keypress)='validaNumericos($event)' (keyup.enter)="update(el.codart,el.index,cant.value)" (change)="update(el.codart,el.index,cant.value)">
												</td>
												<td style="padding:2px;">
													<input #porc_desc class="form-control input-sm kb-pad text-center rquantity" name="porc_desc[]" type="number" inputmode="numeric" step=".01"
													value="{{el.punreo}}" (keypress)='validaNumericos($event)' (keyup.enter)="update_art_desc(el.codart,el.index,porc_desc.value)" (change)="update_art_desc(el.codart,el.index,porc_desc.value)">
												
													<!-- <input #porc_desc class="form-control input-sm kb-pad text-center rquantity" name="porc_desc[]" type="number" inputmode="numeric" -->
													<!-- value="{{el.punreo}}" (keypress)='validaNumericos($event)' (keyup.enter)="update_art_desc(el.codart, porc_desc.value)" (blur)="update_art_desc(el.codart, porc_desc.value)"> -->
												
												</td>
												
												<td> <div class="text-center">USD {{redondear(el.v_desc_art)}}</div> </td>

												<td style="padding:2px;">
													<!-- <div class="text-center"> USD {{redondear(el.cant * el.prec01)}}</div> -->
													<div class="text-center"> USD {{redondear(el.subtotal_art)}}</div>
												</td>
												<td (click)="delete_art(el.nomart,el.index)" class="text-center">
													<i class="fa fa-trash-o tip pointer spodel" title="Remover artículo"></i>
												</td>
											</tr>
                                        </tbody>
										
										<tbody *ngIf="articulos_pedido.length == 0">
											<tr>
											<td class="text-center" colspan="12">Agregar el producto a través de la búsqueda en el campo de arriba</td>
											</tr>
										</tbody>
										

								
                                    </table>
									
                                </div>
								<!-- <input *ngIf="tipo_busqueda"  type="submit" name="busca_articulo" value="Habilitar descuentos" class="btn btn-danger" (click)="busca_articulo()"> -->
                            </div>
                        </div>
						
						 <div class="row">
							<div *ngIf="srv.getConfSeleccArtServPdv()=='SI'" class="col-md-2">
                                <div class="form-group">
                                    <!-- <label>PRODUCTO O SERVICIO</label>  -->
									<td class= "text-center">
									<label  class="switch">
									<input type="checkbox" checked (click)="tipo_entrada()"><span class="slider round"></span>
									</label>
									</td>
									<label  *ngIf="tipo_busqueda" >ARTÍCULO</label> 
									<label  *ngIf="!tipo_busqueda" >SERVICIO</label> 
								</div>
							</div>
			
							<div *ngIf="srv.getConfSeleccArtServPdv()=='SI'"  class="col-md-10">
									<div class="form-group">
															
									<label *ngIf="tipo_busqueda" >BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL ARTÍCULO </label>
									<label *ngIf="!tipo_busqueda" >BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL SERVICIO </label>
									
									
									<input *ngIf="tipo_busqueda"  type="text" placeholder="BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL ARTÍCULO " name="reference" value="" class="form-control tip" id="reference" (keyup.enter)="busca_articulo()"  [(ngModel)]="patron_articulo">
									<input *ngIf="tipo_busqueda"  type="submit" name="busca_articulo" value="Buscar artículo" class="btn btn-primary" (click)="busca_articulo()">
									
									<input *ngIf="!tipo_busqueda"  type="text" placeholder="BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL SERVICIO " name="reference" value="" class="form-control tip" id="reference" (keyup.enter)="busca_servicio()"  [(ngModel)]="patron_articulo">
									<input *ngIf="!tipo_busqueda"  type="submit" name="busca_articulo" value="Buscar servicio" class="btn btn-danger" (click)="busca_servicio()">
									
									</div>
							 </div>
							<div *ngIf="srv.getConfSeleccArtServPdv()=='NO'"  class="col-md-12">
									<div class="form-group">
															
									<label *ngIf="tipo_busqueda" >BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL ARTÍCULO </label>
									<label *ngIf="!tipo_busqueda" >BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL SERVICIO </label>
									
									
									<input *ngIf="tipo_busqueda"  type="text" placeholder="BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL ARTÍCULO " name="reference" value="" class="form-control tip" id="reference" (keyup.enter)="busca_articulo()"  [(ngModel)]="patron_articulo">
									<input *ngIf="tipo_busqueda"  type="submit" name="busca_articulo" value="Buscar artículo" class="btn btn-primary" (click)="busca_articulo()">
									
									<input *ngIf="!tipo_busqueda"  type="text" placeholder="BÚSQUEDA POR CÓDIGO O POR NOMBRE DEL SERVICIO " name="reference" value="" class="form-control tip" id="reference" (keyup.enter)="busca_servicio()"  [(ngModel)]="patron_articulo">
									<input *ngIf="!tipo_busqueda"  type="submit" name="busca_articulo" value="Buscar servicio" class="btn btn-danger" (click)="busca_servicio()">
									
									</div>
							 </div>
							<div class="form-group"  *ngIf="this.exist_articulo">
								<p>Resultado de la busqueda por <<{{this.patron_articulo}}>></p>
								<div class="table-responsive-pedidos">
									<table class="table table-striped table-bordered table-condensed table-hover dataTable">
									   <thead>
										  <tr class="active" role="row">
											 <th>Código</th>
											 <th>Nombre</th>
											 <th class="text-center">Precio unit</th>
											 <th style="width:25px; padding-right:5px;" >Dispon</th>
											 <th style="width:25px; padding-right:5px;" rowspan="1" colspan="1" >Selec</th>
										  </tr>
									   </thead>
									   <tbody role="alert">
										  <tr  *ngFor="let articulos of articulo;">
											 <td class="">{{articulos.codart}}</td>
											 <td class="">{{articulos.nomart}}</td>
											 <td class="text-center">
												<span *ngIf="articulos!==edit_articulos">{{articulos.prec01}}  </span>
												<!-- <input type="text" *ngIf="articulos===articulos" [(ngModel)]="task.title" (blur)="update()" (keyup.enter)="update()"> -->
												<!-- <input type="text" *ngIf="articulos===edit_articulos" > -->
												
											<select  *ngIf="articulos===edit_articulos"  name="nuevo_precio_renglon" [(ngModel)]="nuevo_precio_renglon" (change)="edit_prec_renglon(articulos.codart)" class="form-control select2 tip" style="width:100%;">
											<option [ngValue]="undefined" disabled  selected>Seleccione</option>
											<option *ngFor="let e of lista_prec; let i = index;" [selected] = "i==0" [value]="e.prec">{{e.prec}}</option>
											</select>
												
												
												
												
												<!-- {{articulos.prec01}} -->
											<!-- <a *ngIf="srv.getConfEditPedido() != 'NO'" routerLink="/admin/editar_pedidos" [queryParams]="{usuario:usuario,empresa: empresa,pedido:el.numtra}" class="tip btn btn-warning btn-xs"><i class="fa fa-edit" title="Editar pedido"></i></a>  -->
											<a *ngIf="articulos!==edit_articulos"  (click)="edit_prec(articulos)" class="tip btn btn-warning btn-xs"><i class="fa fa-edit" title="Editar precio"></i></a> 	
											 </td>
											 <td class="">{{articulos.exiact}}</td>
											 <td class=""> 
											  <!-- <input  type="checkbox"/> -->
											  <input  type="checkbox" [(ngModel)]="articulos.isSelected" name="list_name" value="{{articulos.nomart}}" (change)="isAllSelected()"/>
											 </td>
										  </tr>
										</tbody>
									</table>
								</div>
								<div class="col-md-5">
									<input type="submit" name="inserta_pedido" value="Insertar a factura" class="btn btn-danger" (click)="inserta_pedido()">
										<p>{{elements_checkedList.length}}  Items seleccionados</p>
								</div>
							</div>
						</div>
						
					</div>  <!--  class="col-lg-12 -->  
				</div> <!-- BODY-->
				
				<div class="box-header">  <!-- INICIO HEADER RETENCIONES  -->
				
				<div *ngIf="srv.getConfRetencionesPdv()!= 'NO'" class="form-group">
				<table>
				<tr>
				 <td>
                    <h3 style="font-weight:bold;" class="box-title">RETENCIONES  </h3>
				</td>
				<td class="col-xs-6"> 
					 <label class="switch">
					<input type="checkbox" checked (click)="set_aplicar_retencion()"><span class="slider round"></span>
					</label>
					<h3 *ngIf="!aplicar_retencion" style="font-weight:bold;" class="box-title">  (NO)</h3>
					<h3 *ngIf="aplicar_retencion" style="font-weight:bold;" class="box-title">  (SI)</h3>
				</td>
				<!-- <td class="col-xs-2"> -->

				<!-- </td> -->
				</tr>
				
				</table>
				</div><!-- FIN FORM GROUP  -->
                
				</div>   <!-- FIN HEADER RETENCIONES  -->
				
								<div *ngIf="aplicar_retencion"  class="box-body">  <!-- BODY APLICAR RETENCION  -->
                    <div class="col-lg-12">
					
					<div class="row">
							<div class="col-md-4">
                                <div class="form-group">
                                    <label>RETENCION IVA</label>                              
									
									<select name="retencion_iva" [(ngModel)]="retencion_iva_select" (change)="set_retencion_iva()" class="form-control select2 tip" style="width:100%;">
									<option [ngValue]="0" selected>Seleccione</option>
									<!-- <option *ngFor="let e of retencion_iva_lista; let i = index;" [selected] = "i==undefined" [value]="e.porret+'|'+e.codret">{{e.nomret}}</option> -->
									<option *ngFor="let e of retencion_iva_lista; let i = index;"  [value]="e.porret+'|'+e.codret">{{e.nomret}}</option>
									</select>
									<label style="color:blue" >Iva retenido:   USD {{redondear(ret_iva_aplicar)}}</label>  

								</div>
							</div>
							<div class="col-md-4">
                                <div class="form-group">
                                    <label>RETENC FUENTE</label>                              
									
									<select name="retencion_fuente" [(ngModel)]="retencion_fuente_select" (change)="set_retencion_fuente()" class="form-control select2 tip" style="width:100%;">
									<option [ngValue]="0" selected>Seleccione</option>
									<option *ngFor="let e of retencion_fuente_lista; let i = index;"  [value]="e.porret+'|'+e.codret">{{e.nomret}}</option>
									<!-- <option *ngFor="let e of retencion_fuente_lista; let i = index;" [selected] = "i==undefined" [value]="e.porret+'|'+e.codret">{{e.nomret}}</option> -->
									</select>
									<label style="color:blue" >Fuente retenida:   USD {{redondear(ret_fuente_aplicar)}}</label>  

								</div>
							</div>
						</div>
					
					
					
					
					
					</div>
				</div>    <!-- BODY APLICAR RETENCION  -->
				
				
				
				
				<div class="box-header">
                    <h3 style="font-weight:bold;" class="box-title">TOTALES A FACTURAR</h3>
                </div>
				
				<div class="box-body">
                    <div class="col-lg-12">
						<div class="row">

						<div class="col-md-4 col-sm-6 col-xs-12">
							<div class="info-box">
							<!-- <span class="info-box-icon bg-aqua"><i class="ion ion-ios-cart-outline"></i></span> -->
							<span class="info-box-icon bg-aqua"><i class="fa fa-fw fa-cart-plus"></i></span>

							<div class="info-box-content">
								<span class="info-box-text">SUBTOTAL</span>
								<span class="info-box-number">USD {{ redondear (subtotal)}}</span>
								
								<!-- <span class="info-box-number">TOTALES KG</span> -->
								<span *ngIf="desc_cant > 0" class="info-box-text">T.NETO = <span style="color:green;font-weight: bold;" >${{redondear(total_neto)}}</span></span>
								<!-- <span *ngIf="desc_cant > 0" class="info-box-text">T.DESC= <span style="color:red;font-weight: bold;" >-${{redondear(desc_cant)}}</span></span> -->
								<span  *ngIf="desc_cant > 0" class="info-box-text">T.DESC= <span style="color:red;font-weight: bold;" >-${{redondear(desc_cant)}}</span></span>

								</div>
							</div>
						</div>
						
						
						<div class="col-md-4 col-sm-6 col-xs-12">
							<div class="info-box">
							<span class="info-box-icon bg-green"><i class=" fa fa-fw fa-info-circle"></i></span>
							<div class="info-box-content">
								<span class="info-box-text">TOTAL IVA</span>
								<span class="info-box-number">USD {{ redondear (iva_cant_new)}}</span>
							</div>
							</div>
						</div>
								
						
					
						<div class="col-md-4 col-sm-6 col-xs-12">
							<div class="info-box">
							<span class="info-box-icon bg-yellow"><i class="fa fa-fw fa-dollar"></i></span>
							<div class="info-box-content">
								<span  class="info-box-number ">TOTAL A FACTURAR</span>
								<span style="color:red" class="info-box-number">USD {{ redondear (total)}}</span>
							</div>
							</div>
						</div>
						
						

						</div>
						
						<div *ngIf="srv.getConfTotalRecibidoCambioPdv() != 'NO'" class="row">
							<div class="col-md-4">
									<div class="form-group">
										<label>TOTAL RECIBIDO</label>                              
									<input type="text" type="number" inputmode="numeric" style="color:red" placeholder="INGRESE MONTO" name="total_recibido" value="" (blur)="calc_cambio()" (keyup.enter)="calc_cambio()" id="total_recibido" [(ngModel)]="total_recibido" class="form-control tip info-box-number">
									</div>
								</div>
							<div class="col-md-4">
									<div class="form-group">
										<label>CAMBIO</label>                              
										<input style="color:blue" type="number" inputmode="numeric"  placeholder="cambio" name="cambio" disabled value="USD {{ redondear (cambio)}}" class="form-control tip info-box-number">
									</div>
							</div>
						</div>
					</div> <!--  class="col-lg-12 -->
				</div> <!-- BODY -->
				
				
				<!-- public getConfPagoEfectivo(): string { -->
	  <!-- return localStorage.getItem('act_pago_efectivo_pdv') -->
   <!-- } -->
<!-- public getConfPagoCheque(): string { -->
	  <!-- return localStorage.getItem('act_pago_cheque_pdv') -->
   <!-- } -->
<!-- public getConfPagoTrans(): string { -->
	  <!-- return localStorage.getItem('act_pago_trans_pdv') -->
   <!-- } -->
<!-- public getConfPagoCredito(): string { -->
	  <!-- return localStorage.getItem('act_pago_credito_pdv') -->
   <!-- } -->
   
   <!-- getConfPagoTarjeta -->
<!-- public getConfEdicionPlazoCredito(): string { -->
	  <!-- return localStorage.getItem('act_edicion_plazo_credito_pdv') -->
   <!-- } -->
	
				
				<div class="box-header">
                    <h3 style="font-weight:bold;" class="box-title">FORMA DE COBRO</h3>
                </div>
				
				
				<div class="box-body">
                    <div class="col-lg-12">
						<div class="row">
							<div *ngIf="srv.getConfPagoEfectivo() == 'SI'" class="col-md-3">
							<div class="form-group">
									<!-- <input  type="checkbox" [(ngModel)]="check_efectivo" name="check_efectivo" value="1" (change)="forma_pago('efectivo')"/> -->
							        <label>
									
									<input type="checkbox"  *ngIf="!check_credito" [(ngModel)]="check_efectivo" name="check_efectivo"  (change)="forma_pago('efectivo')" > EFECTIVO
									<!-- <input type="checkbox" *ngIf="check_credito"  [(ngModel)]="check_efectivo" name="check_efectivo" disabled > EFECTIVO -->
									
									</label>
									<input *ngIf="!check_efectivo"  type="number" inputmode="numeric" placeholder="Ingrese Monto" name="monto_efectivo" disabled  class="form-control tip">
									<input *ngIf="check_efectivo" type="number" inputmode="numeric" placeholder="Ingrese Monto" name="monto_efectivo"  style="color:blue" [(ngModel)]="monto_efectivo" class="form-control tip info-box-number">
							</div>
							</div>
							

								<div *ngIf="srv.getConfPagoCheque() == 'SI'" class="col-md-3">
									<div class="form-group">
										<label>
											<input type="checkbox" *ngIf="!check_credito"  [(ngModel)]="check_cheque" name="check_cheque"  (change)="forma_pago('cheque')" >
											CHEQUE
										</label>                              
										<input *ngIf="!check_cheque"  type="number" inputmode="numeric"  placeholder="Monto USD" name="monto_cheque" disabled value=""  class="form-control tip ">
										<!-- <input *ngIf="!check_cheque"  type="text"  placeholder="Num Cheque" name="num_cheque" disabled value="" class="form-control tip"> -->
										<!-- <input *ngIf="!check_cheque"  type="text"  placeholder="Seleccione Banco" name="banco" disabled value="" class="form-control tip"> -->
										
										
										<input *ngIf="check_cheque" type="number" inputmode="numeric"  placeholder="Monto USD" name="monto_cheque"  value="" style="color:blue" [(ngModel)]="monto_cheque" class="form-control tip info-box-number">
										<input *ngIf="check_cheque"  type="number" inputmode="numeric"  placeholder="Num Cheque" name="num_cheque" [(ngModel)]="num_cheque"  value="" class="form-control tip">
										<!-- <input *ngIf="check_cheque"  type="text"  placeholder="Seleccione Banco" name="banco"  value="" class="form-control tip"> -->
										<select *ngIf="check_cheque" name="bancos_lista" [(ngModel)]="codban" class="form-control select2 tip" style="width:100%;">
										<option [ngValue]="undefined" selected>Seleccione</option>
										<option *ngFor="let e of bancos_lista; let i = index;" [selected] = "i==0" [value]="e.codban">{{e.nomban}}</option>
										</select>
										
										
										
									</div>
								</div>
								<div *ngIf="srv.getConfPagoTarjeta() == 'SI'" class="col-md-3">
									<div class="form-group">
										<label>
										<input type="checkbox" *ngIf="!check_credito" [(ngModel)]="check_tarjeta" name="check_tarjeta"  (change)="forma_pago('tarjeta')" >
										TARJETA
										</label>
										<input *ngIf="!check_tarjeta" type="number" inputmode="numeric"  placeholder="Monto USD" name="monto_tarjeta" disabled value=""  class="form-control tip">										
										<!-- <input *ngIf="!check_tarjeta" type="text"  placeholder="Num Tarjeta" name="num_tarjeta" disabled value="" class="form-control tip"> -->
										<!-- <input *ngIf="!check_tarjeta" type="text"  placeholder="Selecc Tarjeta" name="tipo_tarjeta" disabled value="" class="form-control tip"> -->
										
										<input *ngIf="check_tarjeta" type="number" inputmode="numeric" placeholder="Monto USD" name="monto_tarjeta"  value="" style="color:blue" [(ngModel)]="monto_tarjeta" class="form-control tip info-box-number">										
										<input *ngIf="check_tarjeta" type="number" inputmode="numeric"  placeholder="Cod Recab" name="Cod Recab"  [(ngModel)]="num_tarjeta"  value="" class="form-control tip">
										<!-- <input *ngIf="check_tarjeta" type="text"  placeholder="Selecc Tarjeta" name="tipo_tarjeta"  value="" class="form-control tip"> -->
									
										<select *ngIf="check_tarjeta" name="tarjeta_lista" [(ngModel)]="codtar" class="form-control select2 tip" style="width:100%;">
										<option [ngValue]="undefined" selected>Selecc tipo</option>
										<option *ngFor="let e of tarjetas_lista; let i = index;" [selected] = "i==0" [value]="e.codtar">{{e.nomtar}}</option>
										</select>
									
									</div>
								</div>
								<div *ngIf="srv.getConfPagoTrans() == 'SI'"  class="col-md-3">
									<div class="form-group">
										<label>
										<input type="checkbox" *ngIf="!check_credito" [(ngModel)]="check_trasf_dep" name="check_trasf_dep"  (change)="forma_pago('tranf')" >
										TRANSFERENCIA / DEPOSITO
										</label>
										<input *ngIf="!check_trasf_dep" type="number" inputmode="numeric"  placeholder="Monto USD" name="monto_transferencia" disabled value=""  class="form-control tip">										

										
										<input *ngIf="check_trasf_dep" type="number" inputmode="numeric" placeholder="Monto USD" name="monto_transferencia"  value="" style="color:blue" [(ngModel)]="monto_transferencia" class="form-control tip info-box-number">										
										<input *ngIf="check_trasf_dep" type="number" inputmode="numeric"  placeholder="Num tranf/dep" name="Codtranf"  [(ngModel)]="num_tranf"  value="" class="form-control tip">
									
										<select *ngIf="check_trasf_dep" name="cta_tranf" [(ngModel)]="coddep" class="form-control select2 tip" style="width:100%;">
										<option [ngValue]="undefined" selected>Selecc tipo</option>
										<option *ngFor="let e of cuentas_lista; let i = index;" [selected] = "i==0" [value]="e.coddep">{{e.coddep}}-{{e.banco}}</option>
										</select>
									
									</div>
								</div>
								
								</div>
								<div class="row">
								
								<div *ngIf="srv.getConfPagoCredito() == 'SI'" class="col-md-3">
									<div class="form-group">
										<label>
										<input type="checkbox" [(ngModel)]="check_credito" name="check_credito"  (change)="forma_pago('credito')" >
										CREDITO
										</label>
										
										<table *ngIf="!check_credito">
											<tr>
												<td style="font-weight:bold;" >Monto de credito</td>
												<td>
													<input *ngIf="!check_credito" type="number" inputmode="numeric" placeholder="Monto credito USD" name="monto_credito" disabled value=""  class="form-control tip">	
												</td>
											</tr>
										</table>										
									
										<table *ngIf="check_credito">
											<tr>
												<td style="font-weight:bold;">Monto de credito</td>
												<td>
													<input *ngIf="check_credito" disabled type="number" inputmode="numeric" placeholder="Monto USD" name="monto_credito"  value="{{redondear (total)}}" style="color:blue" [(ngModel)]="monto_credito" class="form-control tip info-box-number">
												</td>
											</tr>
											<tr>
												<td style="font-weight:bold;">Num. de pagos</td>
												<td>
													<input *ngIf="check_credito && srv.getConfEdicionPlazoCredito()=='SI'" type="number" inputmode="numeric" placeholder="Numero de pagos" name="num_pagos_credito"  [(ngModel)]="num_pagos_credito"  value="" style="color:blue" class="form-control tip info-box-number">
													<input *ngIf="check_credito && srv.getConfEdicionPlazoCredito()=='NO'" type="number" inputmode="numeric" placeholder="Numero de pagos" name="num_pagos_credito"  [(ngModel)]="num_pagos_credito"  value="" style="color:blue" disabled class="form-control tip info-box-number">
												</td>
											</tr>
											<tr>
												<td style="font-weight:bold;" >Plazo de dias por pagos</td>
												<td>
													<input *ngIf="check_credito && srv.getConfEdicionPlazoCredito()=='SI'" type="number" inputmode="numeric" placeholder="Plazo de dias pagos" name="plazo_dias_pagos"  [(ngModel)]="plazo_dias_pagos"  value="" style="color:blue" class="form-control tip info-box-number">
													<input *ngIf="check_credito && srv.getConfEdicionPlazoCredito()=='NO'" type="number" inputmode="numeric" placeholder="Plazo de dias pagos" name="plazo_dias_pagos"  [(ngModel)]="plazo_dias_pagos"  value="" style="color:blue" disabled class="form-control tip info-box-number">
												</td>
											</tr>
										</table>	
													
									</div>
								</div>
								
								<!-- <div *ngIf="srv.getConfPagoCredito() == 'SI'" class="col-md-3"> -->


						</div>


					</div> <!--  class="col-lg-12 -->

				</div> <!-- BODY -->
				
									<div class="box-header">
						<h3 style="font-weight:bold;" class="box-title">OBSERVACIÓNES DE LA FACTURA</h3>
					</div>
					<div class="box-body">
						<div class="form-group">
							<textarea [(ngModel)]="observacion_factura"  name="observacion"  rows="2" cols="2" placeholder="Puede escribir observaciones de la factura"  value="" class="pa form-control kb-text"></textarea>
						</div>
					</div>


				
				<div class="form-group">
					<input *ngIf="(ver_factura==0)"  type="submit" (click)="generar_pdv()"  name="add_purchase" value="Facturar" class="btn btn-primary">

					<button type="button" routerLink="/admin/lista_pdv" [queryParams]="{usuario:usuario,empresa: empresa}"  class="btn btn-success">Ir a Lista facturas</button>
					<button *ngIf="srv.getConfAbrirCierreCaja()!= 'NO'"  type="button" id="reset" (click)="cierre_caja()" class="btn btn-danger">Cerrar Caja</button>
				</div>
				
			<!-- </div>  <!-- PRIMARY--> 
			</div> <!-- /.tab-pane 1-->
			
			<div class="tab-pane"  id="tab_crear_cliente" #tab_crear_cliente>
				<app-admin-cliente status_cambio_vista_cliente="true" #cliente_contenido></app-admin-cliente>
            </div> <!-- /.tab-pane 2-->
			
			<div class="tab-pane"  id="tab_importar_pedido" #tab_importar_pedido>
			
			
			    <div class="box-body">
                    <div class="col-lg-12">
				
						<!-- <div class="row"> -->
							<!-- <!-- <div class="col-md-3"> --> 
								<!-- <label style="font-weight:bold;color:red" >Fecha factura </label> -->
								<!-- <input [(ngModel)]="fectra" type="date" name="fectra" placeholder="dd-mm-yyyy" value="" min="2020-01-01" max="2030-12-31"> -->
								
							<!-- <!-- </div> --> 
						
						<!-- </div> -->

				
					  
					
				
                        <div class="row">
				
							
							<div *ngIf="busqueda_cliente == 'RZ'" class="col-md-6">
                                <!-- <div class="form-group"> -->
							
    							<label >BUSQUEDA DE PEDIDO / ORDEN DE TRABAJO POR RAZON SOCIAL</label>
		
								<!-- <input   type="text" name="search_customer" id="search_customer" (keyup.enter)="busqueda_pedido_razonsocial()"   -->
								<!-- [(ngModel)]="patron_razon_social_pedido"  class="form-control ui-autocomplete-input" placeholder="Ingrese el nombre del cliente"  -->
								<!-- autocomplete="off"> -->
								
								<div class="input-group">
								<input   type="text" name="search_customer" id="search_customer" (keyup.enter)="busqueda_pedido_razonsocial()"  
								[(ngModel)]="patron_razon_social_pedido"  class="form-control ui-autocomplete-input" placeholder="Ingrese el nombre del cliente" 
								autocomplete="off">
								<div (click)="busqueda_pedido_razonsocial()" class="input-group-addon no-print" style="padding: 2px 5px;">
								<a id="add-customer" class="external"><i class="fa fa-2x fa-search" id="searchIcon"></i></a>
								</div> 
								</div>
							</div>
							
							
								<!-- <div class="input-group"> -->
								<!-- <input   type="text" name="search_customer" id="search_customer" (keyup.enter)="busqueda_razon_social()"  [(ngModel)]="patron_cliente"  class="form-control ui-autocomplete-input" placeholder="Ingrese el nombre del cliente" autocomplete="off"> -->
								<!-- <div (click)="busqueda_razon_social()" class="input-group-addon no-print" style="padding: 2px 5px;"> -->
									<!-- <a id="add-customer" class="external"><i class="fa fa-2x fa-search" id="searchIcon"></i></a> -->
								<!-- </div> -->
							
							

							<!-- <div  class="col-md-2"> -->
                                <!-- <div class="form-group"> -->
									<!-- <br>  -->
									<!-- <table> -->
										<!-- <tr> -->
											<!-- <td> -->
								
											<!-- <input *ngIf="busqueda_cliente == 'IDENT'" type="submit" name="busca_cliente" value="Buscar" class="btn btn-primary" (click)="busca_cliente()"> -->
											<!-- <input *ngIf="busqueda_cliente == 'RZ'" type="submit" name="busca_cliente" value="Buscar" class="btn btn-primary" (click)="busqueda_razon_social()"> -->
											<!-- </td> -->
											<!-- <!-- <td class="col-xs-7">  --> 
					
											<!-- <!-- <button type="button" id="cambio_crear_cliente" (click)="switchtab()" class="btn btn-warning" title="Crear cliente" ><i class="fa fa-fw fa-plus"></i></button> --> 
											<!-- <!-- </td> --> 
										<!-- </tr> -->
									<!-- </table> -->
								<!-- </div> -->
                            <!-- </div> -->
							

                        </div>
						
						<div class="row">
							<div class="form-group"  *ngIf="this.exist_pedido">
							<p>Resultado de la busqueda por <<{{this.patron_razon_social_pedido}}>></p>
							<div class="table-responsive-pedidos">
								<table class="table table-striped table-bordered table-condensed table-hover dataTable">
								   <thead>
									  <tr class="active" role="row">
									  	<th class="text-center">Selec</th>
									     <th class="text-center">Numtrans</th>
										 <th class="text-center">Fecha</th>
										 <th>Razon Social</th>
										  <th>Total</th>
										 <!-- <th class="text-center">Num Identificacion</th> -->
										 <th style="width:25px; padding-right:5px;" rowspan="1" colspan="1" >TipoTrans</th>
									  </tr>
								   </thead>
								   <tbody>
									  <tr  *ngFor="let rz of lista_pedidos;">
									  	<td class="text-center"> 
										  <input  type="radio"  name="radio_cliente" (change)="select_pedido_orden(rz.numtra,rz.tiptra)"  />
										  <!-- <input type="radio" name="optionsRadios" id="optionsRadios1" [(ngModel)]="check_agencia" (change)="validar_exist_agencia('P')"  value="principal"> -->
										</td>
									  <td class="text-center">{{rz.numtra}}</td>
									   <td class="text-center">{{rz.fectra}}</td>
										 <td>{{rz.nomcli}}</td>
										  <td>{{rz.totalpedido}}</td>
										  <!-- <td class="text-center">{{rz.rucced}}</td> -->
										 <td class="text-center">{{rz.nombre_tiptra}}</td>

									  </tr>
									</tbody>
								</table>
							</div>
							</div>
						</div>
						
						
						

								
									
								<!-- </div> -->
						
					</div>  <!--  class="col-lg-12 -->  
				</div> <!-- BODY-->
			
			
			
			
			
			
            </div> <!-- /.tab-pane 2-->
			
			
			</div> <!-- /.tab-content -->
			</div> <!-- nav-tabs-custom -->
		</div>  <!-- col-xs-12 -->
	</div>  <!-- ROW -->
 </section>  
  <!-- /.content -->
</div>
